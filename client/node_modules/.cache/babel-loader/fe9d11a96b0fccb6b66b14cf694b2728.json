{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/nafisa/final-project-telegran/client/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _isAndroid = _interopRequireDefault(require(\"./isAndroid\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar RecognitionManager = /*#__PURE__*/function () {\n  function RecognitionManager(SpeechRecognition) {\n    _classCallCheck(this, RecognitionManager);\n\n    this.recognition = null;\n    this.pauseAfterDisconnect = false;\n    this.interimTranscript = '';\n    this.finalTranscript = '';\n    this.listening = false;\n    this.subscribers = {};\n\n    this.onStopListening = function () {};\n\n    this.previousResultWasFinalOnly = false;\n    this.resetTranscript = this.resetTranscript.bind(this);\n    this.startListening = this.startListening.bind(this);\n    this.stopListening = this.stopListening.bind(this);\n    this.abortListening = this.abortListening.bind(this);\n    this.setSpeechRecognition = this.setSpeechRecognition.bind(this);\n    this.setSpeechRecognition(SpeechRecognition);\n\n    if ((0, _isAndroid[\"default\"])()) {\n      this.updateFinalTranscript = (0, _utils.debounce)(this.updateFinalTranscript, 250, true);\n    }\n  }\n\n  _createClass(RecognitionManager, [{\n    key: \"setSpeechRecognition\",\n    value: function setSpeechRecognition(SpeechRecognition) {\n      if (SpeechRecognition) {\n        this.recognition = new SpeechRecognition();\n        this.recognition.continuous = false;\n        this.recognition.interimResults = true;\n        this.recognition.onresult = this.updateTranscript.bind(this);\n        this.recognition.onend = this.onRecognitionDisconnect.bind(this);\n        this.emitBrowserSupportsSpeechRecognitionChange(true);\n      }\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(id, callbacks) {\n      this.subscribers[id] = callbacks;\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(id) {\n      delete this.subscribers[id];\n    }\n  }, {\n    key: \"emitListeningChange\",\n    value: function emitListeningChange(listening) {\n      var _this = this;\n\n      this.listening = listening;\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onListeningChange = _this.subscribers[id].onListeningChange;\n        onListeningChange(listening);\n      });\n    }\n  }, {\n    key: \"emitTranscriptChange\",\n    value: function emitTranscriptChange(interimTranscript, finalTranscript) {\n      var _this2 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onTranscriptChange = _this2.subscribers[id].onTranscriptChange;\n        onTranscriptChange(interimTranscript, finalTranscript);\n      });\n    }\n  }, {\n    key: \"emitClearTranscript\",\n    value: function emitClearTranscript() {\n      var _this3 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onClearTranscript = _this3.subscribers[id].onClearTranscript;\n        onClearTranscript();\n      });\n    }\n  }, {\n    key: \"emitBrowserSupportsSpeechRecognitionChange\",\n    value: function emitBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange) {\n      var _this4 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var _this4$subscribers$id = _this4.subscribers[id],\n            onBrowserSupportsSpeechRecognitionChange = _this4$subscribers$id.onBrowserSupportsSpeechRecognitionChange,\n            onBrowserSupportsContinuousListeningChange = _this4$subscribers$id.onBrowserSupportsContinuousListeningChange;\n        onBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange);\n        onBrowserSupportsContinuousListeningChange(browserSupportsSpeechRecognitionChange);\n      });\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect(disconnectType) {\n      if (this.recognition && this.listening) {\n        switch (disconnectType) {\n          case 'ABORT':\n            this.pauseAfterDisconnect = true;\n            this.abort();\n            break;\n\n          case 'RESET':\n            this.pauseAfterDisconnect = false;\n            this.abort();\n            break;\n\n          case 'STOP':\n          default:\n            this.pauseAfterDisconnect = true;\n            this.stop();\n        }\n      }\n    }\n  }, {\n    key: \"onRecognitionDisconnect\",\n    value: function onRecognitionDisconnect() {\n      this.onStopListening();\n      this.listening = false;\n\n      if (this.pauseAfterDisconnect) {\n        this.emitListeningChange(false);\n      } else if (this.recognition) {\n        if (this.recognition.continuous) {\n          this.startListening({\n            continuous: this.recognition.continuous\n          });\n        } else {\n          this.emitListeningChange(false);\n        }\n      }\n\n      this.pauseAfterDisconnect = false;\n    }\n  }, {\n    key: \"updateTranscript\",\n    value: function updateTranscript(_ref) {\n      var results = _ref.results,\n          resultIndex = _ref.resultIndex;\n      var currentIndex = resultIndex === undefined ? results.length - 1 : resultIndex;\n      this.interimTranscript = '';\n      this.finalTranscript = '';\n\n      for (var i = currentIndex; i < results.length; ++i) {\n        if (results[i].isFinal && (!(0, _isAndroid[\"default\"])() || results[i][0].confidence > 0)) {\n          this.updateFinalTranscript(results[i][0].transcript);\n        } else {\n          this.interimTranscript = (0, _utils.concatTranscripts)(this.interimTranscript, results[i][0].transcript);\n        }\n      }\n\n      var isDuplicateResult = false;\n\n      if (this.interimTranscript === '' && this.finalTranscript !== '') {\n        if (this.previousResultWasFinalOnly) {\n          isDuplicateResult = true;\n        }\n\n        this.previousResultWasFinalOnly = true;\n      } else {\n        this.previousResultWasFinalOnly = false;\n      }\n\n      if (!isDuplicateResult) {\n        this.emitTranscriptChange(this.interimTranscript, this.finalTranscript);\n      }\n    }\n  }, {\n    key: \"updateFinalTranscript\",\n    value: function updateFinalTranscript(newFinalTranscript) {\n      this.finalTranscript = (0, _utils.concatTranscripts)(this.finalTranscript, newFinalTranscript);\n    }\n  }, {\n    key: \"resetTranscript\",\n    value: function resetTranscript() {\n      this.disconnect('RESET');\n    }\n  }, {\n    key: \"startListening\",\n    value: function () {\n      var _startListening = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _ref2,\n            _ref2$continuous,\n            continuous,\n            language,\n            isContinuousChanged,\n            isLanguageChanged,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ref2 = _args.length > 0 && _args[0] !== undefined ? _args[0] : {}, _ref2$continuous = _ref2.continuous, continuous = _ref2$continuous === void 0 ? false : _ref2$continuous, language = _ref2.language;\n\n                if (this.recognition) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                isContinuousChanged = continuous !== this.recognition.continuous;\n                isLanguageChanged = language && language !== this.recognition.lang;\n\n                if (!(isContinuousChanged || isLanguageChanged)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                if (!this.listening) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 9;\n                return this.stopListening();\n\n              case 9:\n                this.recognition.continuous = isContinuousChanged ? continuous : this.recognition.continuous;\n                this.recognition.lang = isLanguageChanged ? language : this.recognition.lang;\n\n              case 11:\n                if (!this.listening) {\n                  if (!this.recognition.continuous) {\n                    this.resetTranscript();\n                    this.emitClearTranscript();\n                  }\n\n                  try {\n                    this.start();\n                  } catch (DOMException) {// Tried to start recognition after it has already started - safe to swallow this error\n                  }\n\n                  this.emitListeningChange(true);\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function startListening() {\n        return _startListening.apply(this, arguments);\n      }\n\n      return startListening;\n    }()\n  }, {\n    key: \"abortListening\",\n    value: function () {\n      var _abortListening = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this5 = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.disconnect('ABORT');\n                this.emitListeningChange(false);\n                _context2.next = 4;\n                return new Promise(function (resolve) {\n                  _this5.onStopListening = resolve;\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function abortListening() {\n        return _abortListening.apply(this, arguments);\n      }\n\n      return abortListening;\n    }()\n  }, {\n    key: \"stopListening\",\n    value: function () {\n      var _stopListening = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _this6 = this;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.disconnect('STOP');\n                this.emitListeningChange(false);\n                _context3.next = 4;\n                return new Promise(function (resolve) {\n                  _this6.onStopListening = resolve;\n                });\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function stopListening() {\n        return _stopListening.apply(this, arguments);\n      }\n\n      return stopListening;\n    }()\n  }, {\n    key: \"getRecognition\",\n    value: function getRecognition() {\n      return this.recognition;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.recognition && !this.listening) {\n        this.recognition.start();\n        this.listening = true;\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.recognition && this.listening) {\n        this.recognition.stop();\n        this.listening = false;\n      }\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      if (this.recognition && this.listening) {\n        this.recognition.abort();\n        this.listening = false;\n      }\n    }\n  }]);\n\n  return RecognitionManager;\n}();\n\nexports[\"default\"] = RecognitionManager;","map":{"version":3,"sources":["/Users/nafisa/final-project-telegran/client/node_modules/react-speech-recognition/lib/RecognitionManager.js"],"names":["Object","defineProperty","exports","value","_isAndroid","_interopRequireDefault","require","_utils","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","prototype","RecognitionManager","SpeechRecognition","recognition","pauseAfterDisconnect","interimTranscript","finalTranscript","listening","subscribers","onStopListening","previousResultWasFinalOnly","resetTranscript","bind","startListening","stopListening","abortListening","setSpeechRecognition","updateFinalTranscript","debounce","continuous","interimResults","onresult","updateTranscript","onend","onRecognitionDisconnect","emitBrowserSupportsSpeechRecognitionChange","subscribe","id","callbacks","unsubscribe","emitListeningChange","_this","keys","forEach","onListeningChange","emitTranscriptChange","_this2","onTranscriptChange","emitClearTranscript","_this3","onClearTranscript","browserSupportsSpeechRecognitionChange","_this4","_this4$subscribers$id","onBrowserSupportsSpeechRecognitionChange","onBrowserSupportsContinuousListeningChange","disconnect","disconnectType","abort","stop","_ref","results","resultIndex","currentIndex","isFinal","confidence","transcript","concatTranscripts","isDuplicateResult","newFinalTranscript","_startListening","mark","_callee","_ref2","_ref2$continuous","language","isContinuousChanged","isLanguageChanged","_args","wrap","_callee$","_context","prev","next","abrupt","lang","start","DOMException","_abortListening","_callee2","_this5","_callee2$","_context2","_stopListening","_callee3","_this6","_callee3$","_context3","getRecognition"],"mappings":"AAAA;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,UAAU,GAAGC,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAAvC;;AAEA,IAAIC,MAAM,GAAGD,OAAO,CAAC,SAAD,CAApB;;AAEA,SAASD,sBAAT,CAAgCG,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAE,eAAWA;AAAb,GAArC;AAA0D;;AAEjG,SAASE,kBAAT,CAA4BC,GAA5B,EAAiCC,OAAjC,EAA0CC,MAA1C,EAAkDC,KAAlD,EAAyDC,MAAzD,EAAiEC,GAAjE,EAAsEC,GAAtE,EAA2E;AAAE,MAAI;AAAE,QAAIC,IAAI,GAAGP,GAAG,CAACK,GAAD,CAAH,CAASC,GAAT,CAAX;AAA0B,QAAId,KAAK,GAAGe,IAAI,CAACf,KAAjB;AAAyB,GAAzD,CAA0D,OAAOgB,KAAP,EAAc;AAAEN,IAAAA,MAAM,CAACM,KAAD,CAAN;AAAe;AAAS;;AAAC,MAAID,IAAI,CAACE,IAAT,EAAe;AAAER,IAAAA,OAAO,CAACT,KAAD,CAAP;AAAiB,GAAlC,MAAwC;AAAEkB,IAAAA,OAAO,CAACT,OAAR,CAAgBT,KAAhB,EAAuBmB,IAAvB,CAA4BR,KAA5B,EAAmCC,MAAnC;AAA6C;AAAE;;AAEzQ,SAASQ,iBAAT,CAA2BC,EAA3B,EAA+B;AAAE,SAAO,YAAY;AAAE,QAAIC,IAAI,GAAG,IAAX;AAAA,QAAiBC,IAAI,GAAGC,SAAxB;AAAmC,WAAO,IAAIN,OAAJ,CAAY,UAAUT,OAAV,EAAmBC,MAAnB,EAA2B;AAAE,UAAIF,GAAG,GAAGa,EAAE,CAACI,KAAH,CAASH,IAAT,EAAeC,IAAf,CAAV;;AAAgC,eAASZ,KAAT,CAAeX,KAAf,EAAsB;AAAEO,QAAAA,kBAAkB,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,MAA9B,EAAsC,MAAtC,EAA8CZ,KAA9C,CAAlB;AAAyE;;AAAC,eAASY,MAAT,CAAgBc,GAAhB,EAAqB;AAAEnB,QAAAA,kBAAkB,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,MAA9B,EAAsC,OAAtC,EAA+Cc,GAA/C,CAAlB;AAAwE;;AAACf,MAAAA,KAAK,CAACgB,SAAD,CAAL;AAAmB,KAA9R,CAAP;AAAyS,GAAjW;AAAoW;;AAErY,SAASC,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAAE,QAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AAA2BE,IAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,IAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,QAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4B3C,IAAAA,MAAM,CAACC,cAAP,CAAsBmC,MAAtB,EAA8BI,UAAU,CAACxB,GAAzC,EAA8CwB,UAA9C;AAA4D;AAAE;;AAE7T,SAASI,YAAT,CAAsBX,WAAtB,EAAmCY,UAAnC,EAA+CC,WAA/C,EAA4D;AAAE,MAAID,UAAJ,EAAgBV,iBAAiB,CAACF,WAAW,CAACc,SAAb,EAAwBF,UAAxB,CAAjB;AAAsD,MAAIC,WAAJ,EAAiBX,iBAAiB,CAACF,WAAD,EAAca,WAAd,CAAjB;AAA6C,SAAOb,WAAP;AAAqB;;AAEvN,IAAIe,kBAAkB,GAAG,aAAa,YAAY;AAChD,WAASA,kBAAT,CAA4BC,iBAA5B,EAA+C;AAC7ClB,IAAAA,eAAe,CAAC,IAAD,EAAOiB,kBAAP,CAAf;;AAEA,SAAKE,WAAL,GAAmB,IAAnB;AACA,SAAKC,oBAAL,GAA4B,KAA5B;AACA,SAAKC,iBAAL,GAAyB,EAAzB;AACA,SAAKC,eAAL,GAAuB,EAAvB;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,WAAL,GAAmB,EAAnB;;AAEA,SAAKC,eAAL,GAAuB,YAAY,CAAE,CAArC;;AAEA,SAAKC,0BAAL,GAAkC,KAAlC;AACA,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKE,aAAL,GAAqB,KAAKA,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKG,cAAL,GAAsB,KAAKA,cAAL,CAAoBH,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKI,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BJ,IAA1B,CAA+B,IAA/B,CAA5B;AACA,SAAKI,oBAAL,CAA0Bd,iBAA1B;;AAEA,QAAI,CAAC,GAAG7C,UAAU,CAAC,SAAD,CAAd,GAAJ,EAAkC;AAChC,WAAK4D,qBAAL,GAA6B,CAAC,GAAGzD,MAAM,CAAC0D,QAAX,EAAqB,KAAKD,qBAA1B,EAAiD,GAAjD,EAAsD,IAAtD,CAA7B;AACD;AACF;;AAEDpB,EAAAA,YAAY,CAACI,kBAAD,EAAqB,CAAC;AAChChC,IAAAA,GAAG,EAAE,sBAD2B;AAEhCb,IAAAA,KAAK,EAAE,SAAS4D,oBAAT,CAA8Bd,iBAA9B,EAAiD;AACtD,UAAIA,iBAAJ,EAAuB;AACrB,aAAKC,WAAL,GAAmB,IAAID,iBAAJ,EAAnB;AACA,aAAKC,WAAL,CAAiBgB,UAAjB,GAA8B,KAA9B;AACA,aAAKhB,WAAL,CAAiBiB,cAAjB,GAAkC,IAAlC;AACA,aAAKjB,WAAL,CAAiBkB,QAAjB,GAA4B,KAAKC,gBAAL,CAAsBV,IAAtB,CAA2B,IAA3B,CAA5B;AACA,aAAKT,WAAL,CAAiBoB,KAAjB,GAAyB,KAAKC,uBAAL,CAA6BZ,IAA7B,CAAkC,IAAlC,CAAzB;AACA,aAAKa,0CAAL,CAAgD,IAAhD;AACD;AACF;AAX+B,GAAD,EAY9B;AACDxD,IAAAA,GAAG,EAAE,WADJ;AAEDb,IAAAA,KAAK,EAAE,SAASsE,SAAT,CAAmBC,EAAnB,EAAuBC,SAAvB,EAAkC;AACvC,WAAKpB,WAAL,CAAiBmB,EAAjB,IAAuBC,SAAvB;AACD;AAJA,GAZ8B,EAiB9B;AACD3D,IAAAA,GAAG,EAAE,aADJ;AAEDb,IAAAA,KAAK,EAAE,SAASyE,WAAT,CAAqBF,EAArB,EAAyB;AAC9B,aAAO,KAAKnB,WAAL,CAAiBmB,EAAjB,CAAP;AACD;AAJA,GAjB8B,EAsB9B;AACD1D,IAAAA,GAAG,EAAE,qBADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS0E,mBAAT,CAA6BvB,SAA7B,EAAwC;AAC7C,UAAIwB,KAAK,GAAG,IAAZ;;AAEA,WAAKxB,SAAL,GAAiBA,SAAjB;AACAtD,MAAAA,MAAM,CAAC+E,IAAP,CAAY,KAAKxB,WAAjB,EAA8ByB,OAA9B,CAAsC,UAAUN,EAAV,EAAc;AAClD,YAAIO,iBAAiB,GAAGH,KAAK,CAACvB,WAAN,CAAkBmB,EAAlB,EAAsBO,iBAA9C;AACAA,QAAAA,iBAAiB,CAAC3B,SAAD,CAAjB;AACD,OAHD;AAID;AAVA,GAtB8B,EAiC9B;AACDtC,IAAAA,GAAG,EAAE,sBADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS+E,oBAAT,CAA8B9B,iBAA9B,EAAiDC,eAAjD,EAAkE;AACvE,UAAI8B,MAAM,GAAG,IAAb;;AAEAnF,MAAAA,MAAM,CAAC+E,IAAP,CAAY,KAAKxB,WAAjB,EAA8ByB,OAA9B,CAAsC,UAAUN,EAAV,EAAc;AAClD,YAAIU,kBAAkB,GAAGD,MAAM,CAAC5B,WAAP,CAAmBmB,EAAnB,EAAuBU,kBAAhD;AACAA,QAAAA,kBAAkB,CAAChC,iBAAD,EAAoBC,eAApB,CAAlB;AACD,OAHD;AAID;AATA,GAjC8B,EA2C9B;AACDrC,IAAAA,GAAG,EAAE,qBADJ;AAEDb,IAAAA,KAAK,EAAE,SAASkF,mBAAT,GAA+B;AACpC,UAAIC,MAAM,GAAG,IAAb;;AAEAtF,MAAAA,MAAM,CAAC+E,IAAP,CAAY,KAAKxB,WAAjB,EAA8ByB,OAA9B,CAAsC,UAAUN,EAAV,EAAc;AAClD,YAAIa,iBAAiB,GAAGD,MAAM,CAAC/B,WAAP,CAAmBmB,EAAnB,EAAuBa,iBAA/C;AACAA,QAAAA,iBAAiB;AAClB,OAHD;AAID;AATA,GA3C8B,EAqD9B;AACDvE,IAAAA,GAAG,EAAE,4CADJ;AAEDb,IAAAA,KAAK,EAAE,SAASqE,0CAAT,CAAoDgB,sCAApD,EAA4F;AACjG,UAAIC,MAAM,GAAG,IAAb;;AAEAzF,MAAAA,MAAM,CAAC+E,IAAP,CAAY,KAAKxB,WAAjB,EAA8ByB,OAA9B,CAAsC,UAAUN,EAAV,EAAc;AAClD,YAAIgB,qBAAqB,GAAGD,MAAM,CAAClC,WAAP,CAAmBmB,EAAnB,CAA5B;AAAA,YACIiB,wCAAwC,GAAGD,qBAAqB,CAACC,wCADrE;AAAA,YAEIC,0CAA0C,GAAGF,qBAAqB,CAACE,0CAFvE;AAGAD,QAAAA,wCAAwC,CAACH,sCAAD,CAAxC;AACAI,QAAAA,0CAA0C,CAACJ,sCAAD,CAA1C;AACD,OAND;AAOD;AAZA,GArD8B,EAkE9B;AACDxE,IAAAA,GAAG,EAAE,YADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS0F,UAAT,CAAoBC,cAApB,EAAoC;AACzC,UAAI,KAAK5C,WAAL,IAAoB,KAAKI,SAA7B,EAAwC;AACtC,gBAAQwC,cAAR;AACE,eAAK,OAAL;AACE,iBAAK3C,oBAAL,GAA4B,IAA5B;AACA,iBAAK4C,KAAL;AACA;;AAEF,eAAK,OAAL;AACE,iBAAK5C,oBAAL,GAA4B,KAA5B;AACA,iBAAK4C,KAAL;AACA;;AAEF,eAAK,MAAL;AACA;AACE,iBAAK5C,oBAAL,GAA4B,IAA5B;AACA,iBAAK6C,IAAL;AAdJ;AAgBD;AACF;AArBA,GAlE8B,EAwF9B;AACDhF,IAAAA,GAAG,EAAE,yBADJ;AAEDb,IAAAA,KAAK,EAAE,SAASoE,uBAAT,GAAmC;AACxC,WAAKf,eAAL;AACA,WAAKF,SAAL,GAAiB,KAAjB;;AAEA,UAAI,KAAKH,oBAAT,EAA+B;AAC7B,aAAK0B,mBAAL,CAAyB,KAAzB;AACD,OAFD,MAEO,IAAI,KAAK3B,WAAT,EAAsB;AAC3B,YAAI,KAAKA,WAAL,CAAiBgB,UAArB,EAAiC;AAC/B,eAAKN,cAAL,CAAoB;AAClBM,YAAAA,UAAU,EAAE,KAAKhB,WAAL,CAAiBgB;AADX,WAApB;AAGD,SAJD,MAIO;AACL,eAAKW,mBAAL,CAAyB,KAAzB;AACD;AACF;;AAED,WAAK1B,oBAAL,GAA4B,KAA5B;AACD;AAnBA,GAxF8B,EA4G9B;AACDnC,IAAAA,GAAG,EAAE,kBADJ;AAEDb,IAAAA,KAAK,EAAE,SAASkE,gBAAT,CAA0B4B,IAA1B,EAAgC;AACrC,UAAIC,OAAO,GAAGD,IAAI,CAACC,OAAnB;AAAA,UACIC,WAAW,GAAGF,IAAI,CAACE,WADvB;AAEA,UAAIC,YAAY,GAAGD,WAAW,KAAKrE,SAAhB,GAA4BoE,OAAO,CAAC3D,MAAR,GAAiB,CAA7C,GAAiD4D,WAApE;AACA,WAAK/C,iBAAL,GAAyB,EAAzB;AACA,WAAKC,eAAL,GAAuB,EAAvB;;AAEA,WAAK,IAAIf,CAAC,GAAG8D,YAAb,EAA2B9D,CAAC,GAAG4D,OAAO,CAAC3D,MAAvC,EAA+C,EAAED,CAAjD,EAAoD;AAClD,YAAI4D,OAAO,CAAC5D,CAAD,CAAP,CAAW+D,OAAX,KAAuB,CAAC,CAAC,GAAGjG,UAAU,CAAC,SAAD,CAAd,GAAD,IAAiC8F,OAAO,CAAC5D,CAAD,CAAP,CAAW,CAAX,EAAcgE,UAAd,GAA2B,CAAnF,CAAJ,EAA2F;AACzF,eAAKtC,qBAAL,CAA2BkC,OAAO,CAAC5D,CAAD,CAAP,CAAW,CAAX,EAAciE,UAAzC;AACD,SAFD,MAEO;AACL,eAAKnD,iBAAL,GAAyB,CAAC,GAAG7C,MAAM,CAACiG,iBAAX,EAA8B,KAAKpD,iBAAnC,EAAsD8C,OAAO,CAAC5D,CAAD,CAAP,CAAW,CAAX,EAAciE,UAApE,CAAzB;AACD;AACF;;AAED,UAAIE,iBAAiB,GAAG,KAAxB;;AAEA,UAAI,KAAKrD,iBAAL,KAA2B,EAA3B,IAAiC,KAAKC,eAAL,KAAyB,EAA9D,EAAkE;AAChE,YAAI,KAAKI,0BAAT,EAAqC;AACnCgD,UAAAA,iBAAiB,GAAG,IAApB;AACD;;AAED,aAAKhD,0BAAL,GAAkC,IAAlC;AACD,OAND,MAMO;AACL,aAAKA,0BAAL,GAAkC,KAAlC;AACD;;AAED,UAAI,CAACgD,iBAAL,EAAwB;AACtB,aAAKvB,oBAAL,CAA0B,KAAK9B,iBAA/B,EAAkD,KAAKC,eAAvD;AACD;AACF;AAhCA,GA5G8B,EA6I9B;AACDrC,IAAAA,GAAG,EAAE,uBADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS6D,qBAAT,CAA+B0C,kBAA/B,EAAmD;AACxD,WAAKrD,eAAL,GAAuB,CAAC,GAAG9C,MAAM,CAACiG,iBAAX,EAA8B,KAAKnD,eAAnC,EAAoDqD,kBAApD,CAAvB;AACD;AAJA,GA7I8B,EAkJ9B;AACD1F,IAAAA,GAAG,EAAE,iBADJ;AAEDb,IAAAA,KAAK,EAAE,SAASuD,eAAT,GAA2B;AAChC,WAAKmC,UAAL,CAAgB,OAAhB;AACD;AAJA,GAlJ8B,EAuJ9B;AACD7E,IAAAA,GAAG,EAAE,gBADJ;AAEDb,IAAAA,KAAK,EAAE,YAAY;AACjB,UAAIwG,eAAe,GAAGpF,iBAAiB,EAAE,aAAa,oBAAmBqF,IAAnB,CAAwB,SAASC,OAAT,GAAmB;AAC/F,YAAIC,KAAJ;AAAA,YACIC,gBADJ;AAAA,YAEI7C,UAFJ;AAAA,YAGI8C,QAHJ;AAAA,YAIIC,mBAJJ;AAAA,YAKIC,iBALJ;AAAA,YAMIC,KAAK,GAAGxF,SANZ;;AAQA,eAAO,oBAAmByF,IAAnB,CAAwB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AACzD,iBAAO,CAAP,EAAU;AACR,oBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACE,mBAAK,CAAL;AACEV,gBAAAA,KAAK,GAAGK,KAAK,CAAC5E,MAAN,GAAe,CAAf,IAAoB4E,KAAK,CAAC,CAAD,CAAL,KAAarF,SAAjC,GAA6CqF,KAAK,CAAC,CAAD,CAAlD,GAAwD,EAAhE,EAAoEJ,gBAAgB,GAAGD,KAAK,CAAC5C,UAA7F,EAAyGA,UAAU,GAAG6C,gBAAgB,KAAK,KAAK,CAA1B,GAA8B,KAA9B,GAAsCA,gBAA5J,EAA8KC,QAAQ,GAAGF,KAAK,CAACE,QAA/L;;AAEA,oBAAI,KAAK9D,WAAT,EAAsB;AACpBoE,kBAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;AACD;;AAED,uBAAOF,QAAQ,CAACG,MAAT,CAAgB,QAAhB,CAAP;;AAEF,mBAAK,CAAL;AACER,gBAAAA,mBAAmB,GAAG/C,UAAU,KAAK,KAAKhB,WAAL,CAAiBgB,UAAtD;AACAgD,gBAAAA,iBAAiB,GAAGF,QAAQ,IAAIA,QAAQ,KAAK,KAAK9D,WAAL,CAAiBwE,IAA9D;;AAEA,oBAAI,EAAET,mBAAmB,IAAIC,iBAAzB,CAAJ,EAAiD;AAC/CI,kBAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA;AACD;;AAED,oBAAI,CAAC,KAAKlE,SAAV,EAAqB;AACnBgE,kBAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;AACD;;AAEDF,gBAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA,uBAAO,KAAK3D,aAAL,EAAP;;AAEF,mBAAK,CAAL;AACE,qBAAKX,WAAL,CAAiBgB,UAAjB,GAA8B+C,mBAAmB,GAAG/C,UAAH,GAAgB,KAAKhB,WAAL,CAAiBgB,UAAlF;AACA,qBAAKhB,WAAL,CAAiBwE,IAAjB,GAAwBR,iBAAiB,GAAGF,QAAH,GAAc,KAAK9D,WAAL,CAAiBwE,IAAxE;;AAEF,mBAAK,EAAL;AACE,oBAAI,CAAC,KAAKpE,SAAV,EAAqB;AACnB,sBAAI,CAAC,KAAKJ,WAAL,CAAiBgB,UAAtB,EAAkC;AAChC,yBAAKR,eAAL;AACA,yBAAK2B,mBAAL;AACD;;AAED,sBAAI;AACF,yBAAKsC,KAAL;AACD,mBAFD,CAEE,OAAOC,YAAP,EAAqB,CAAC;AACvB;;AAED,uBAAK/C,mBAAL,CAAyB,IAAzB;AACD;;AAEH,mBAAK,EAAL;AACA,mBAAK,KAAL;AACE,uBAAOyC,QAAQ,CAACtB,IAAT,EAAP;AAjDJ;AAmDD;AACF,SAtDM,EAsDJa,OAtDI,EAsDK,IAtDL,CAAP;AAuDD,OAhEqD,CAAf,CAAvC;;AAkEA,eAASjD,cAAT,GAA0B;AACxB,eAAO+C,eAAe,CAAC/E,KAAhB,CAAsB,IAAtB,EAA4BD,SAA5B,CAAP;AACD;;AAED,aAAOiC,cAAP;AACD,KAxEM;AAFN,GAvJ8B,EAkO9B;AACD5C,IAAAA,GAAG,EAAE,gBADJ;AAEDb,IAAAA,KAAK,EAAE,YAAY;AACjB,UAAI0H,eAAe,GAAGtG,iBAAiB,EAAE,aAAa,oBAAmBqF,IAAnB,CAAwB,SAASkB,QAAT,GAAoB;AAChG,YAAIC,MAAM,GAAG,IAAb;;AAEA,eAAO,oBAAmBX,IAAnB,CAAwB,SAASY,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,iBAAO,CAAP,EAAU;AACR,oBAAQA,SAAS,CAACV,IAAV,GAAiBU,SAAS,CAACT,IAAnC;AACE,mBAAK,CAAL;AACE,qBAAK3B,UAAL,CAAgB,OAAhB;AACA,qBAAKhB,mBAAL,CAAyB,KAAzB;AACAoD,gBAAAA,SAAS,CAACT,IAAV,GAAiB,CAAjB;AACA,uBAAO,IAAInG,OAAJ,CAAY,UAAUT,OAAV,EAAmB;AACpCmH,kBAAAA,MAAM,CAACvE,eAAP,GAAyB5C,OAAzB;AACD,iBAFM,CAAP;;AAIF,mBAAK,CAAL;AACA,mBAAK,KAAL;AACE,uBAAOqH,SAAS,CAACjC,IAAV,EAAP;AAXJ;AAaD;AACF,SAhBM,EAgBJ8B,QAhBI,EAgBM,IAhBN,CAAP;AAiBD,OApBqD,CAAf,CAAvC;;AAsBA,eAAShE,cAAT,GAA0B;AACxB,eAAO+D,eAAe,CAACjG,KAAhB,CAAsB,IAAtB,EAA4BD,SAA5B,CAAP;AACD;;AAED,aAAOmC,cAAP;AACD,KA5BM;AAFN,GAlO8B,EAiQ9B;AACD9C,IAAAA,GAAG,EAAE,eADJ;AAEDb,IAAAA,KAAK,EAAE,YAAY;AACjB,UAAI+H,cAAc,GAAG3G,iBAAiB,EAAE,aAAa,oBAAmBqF,IAAnB,CAAwB,SAASuB,QAAT,GAAoB;AAC/F,YAAIC,MAAM,GAAG,IAAb;;AAEA,eAAO,oBAAmBhB,IAAnB,CAAwB,SAASiB,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,iBAAO,CAAP,EAAU;AACR,oBAAQA,SAAS,CAACf,IAAV,GAAiBe,SAAS,CAACd,IAAnC;AACE,mBAAK,CAAL;AACE,qBAAK3B,UAAL,CAAgB,MAAhB;AACA,qBAAKhB,mBAAL,CAAyB,KAAzB;AACAyD,gBAAAA,SAAS,CAACd,IAAV,GAAiB,CAAjB;AACA,uBAAO,IAAInG,OAAJ,CAAY,UAAUT,OAAV,EAAmB;AACpCwH,kBAAAA,MAAM,CAAC5E,eAAP,GAAyB5C,OAAzB;AACD,iBAFM,CAAP;;AAIF,mBAAK,CAAL;AACA,mBAAK,KAAL;AACE,uBAAO0H,SAAS,CAACtC,IAAV,EAAP;AAXJ;AAaD;AACF,SAhBM,EAgBJmC,QAhBI,EAgBM,IAhBN,CAAP;AAiBD,OApBoD,CAAf,CAAtC;;AAsBA,eAAStE,aAAT,GAAyB;AACvB,eAAOqE,cAAc,CAACtG,KAAf,CAAqB,IAArB,EAA2BD,SAA3B,CAAP;AACD;;AAED,aAAOkC,aAAP;AACD,KA5BM;AAFN,GAjQ8B,EAgS9B;AACD7C,IAAAA,GAAG,EAAE,gBADJ;AAEDb,IAAAA,KAAK,EAAE,SAASoI,cAAT,GAA0B;AAC/B,aAAO,KAAKrF,WAAZ;AACD;AAJA,GAhS8B,EAqS9B;AACDlC,IAAAA,GAAG,EAAE,OADJ;AAEDb,IAAAA,KAAK,EAAE,SAASwH,KAAT,GAAiB;AACtB,UAAI,KAAKzE,WAAL,IAAoB,CAAC,KAAKI,SAA9B,EAAyC;AACvC,aAAKJ,WAAL,CAAiByE,KAAjB;AACA,aAAKrE,SAAL,GAAiB,IAAjB;AACD;AACF;AAPA,GArS8B,EA6S9B;AACDtC,IAAAA,GAAG,EAAE,MADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS6F,IAAT,GAAgB;AACrB,UAAI,KAAK9C,WAAL,IAAoB,KAAKI,SAA7B,EAAwC;AACtC,aAAKJ,WAAL,CAAiB8C,IAAjB;AACA,aAAK1C,SAAL,GAAiB,KAAjB;AACD;AACF;AAPA,GA7S8B,EAqT9B;AACDtC,IAAAA,GAAG,EAAE,OADJ;AAEDb,IAAAA,KAAK,EAAE,SAAS4F,KAAT,GAAiB;AACtB,UAAI,KAAK7C,WAAL,IAAoB,KAAKI,SAA7B,EAAwC;AACtC,aAAKJ,WAAL,CAAiB6C,KAAjB;AACA,aAAKzC,SAAL,GAAiB,KAAjB;AACD;AACF;AAPA,GArT8B,CAArB,CAAZ;;AA+TA,SAAON,kBAAP;AACD,CA1VqC,EAAtC;;AA4VA9C,OAAO,CAAC,SAAD,CAAP,GAAqB8C,kBAArB","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _isAndroid = _interopRequireDefault(require(\"./isAndroid\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar RecognitionManager = /*#__PURE__*/function () {\n  function RecognitionManager(SpeechRecognition) {\n    _classCallCheck(this, RecognitionManager);\n\n    this.recognition = null;\n    this.pauseAfterDisconnect = false;\n    this.interimTranscript = '';\n    this.finalTranscript = '';\n    this.listening = false;\n    this.subscribers = {};\n\n    this.onStopListening = function () {};\n\n    this.previousResultWasFinalOnly = false;\n    this.resetTranscript = this.resetTranscript.bind(this);\n    this.startListening = this.startListening.bind(this);\n    this.stopListening = this.stopListening.bind(this);\n    this.abortListening = this.abortListening.bind(this);\n    this.setSpeechRecognition = this.setSpeechRecognition.bind(this);\n    this.setSpeechRecognition(SpeechRecognition);\n\n    if ((0, _isAndroid[\"default\"])()) {\n      this.updateFinalTranscript = (0, _utils.debounce)(this.updateFinalTranscript, 250, true);\n    }\n  }\n\n  _createClass(RecognitionManager, [{\n    key: \"setSpeechRecognition\",\n    value: function setSpeechRecognition(SpeechRecognition) {\n      if (SpeechRecognition) {\n        this.recognition = new SpeechRecognition();\n        this.recognition.continuous = false;\n        this.recognition.interimResults = true;\n        this.recognition.onresult = this.updateTranscript.bind(this);\n        this.recognition.onend = this.onRecognitionDisconnect.bind(this);\n        this.emitBrowserSupportsSpeechRecognitionChange(true);\n      }\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(id, callbacks) {\n      this.subscribers[id] = callbacks;\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(id) {\n      delete this.subscribers[id];\n    }\n  }, {\n    key: \"emitListeningChange\",\n    value: function emitListeningChange(listening) {\n      var _this = this;\n\n      this.listening = listening;\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onListeningChange = _this.subscribers[id].onListeningChange;\n        onListeningChange(listening);\n      });\n    }\n  }, {\n    key: \"emitTranscriptChange\",\n    value: function emitTranscriptChange(interimTranscript, finalTranscript) {\n      var _this2 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onTranscriptChange = _this2.subscribers[id].onTranscriptChange;\n        onTranscriptChange(interimTranscript, finalTranscript);\n      });\n    }\n  }, {\n    key: \"emitClearTranscript\",\n    value: function emitClearTranscript() {\n      var _this3 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onClearTranscript = _this3.subscribers[id].onClearTranscript;\n        onClearTranscript();\n      });\n    }\n  }, {\n    key: \"emitBrowserSupportsSpeechRecognitionChange\",\n    value: function emitBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange) {\n      var _this4 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var _this4$subscribers$id = _this4.subscribers[id],\n            onBrowserSupportsSpeechRecognitionChange = _this4$subscribers$id.onBrowserSupportsSpeechRecognitionChange,\n            onBrowserSupportsContinuousListeningChange = _this4$subscribers$id.onBrowserSupportsContinuousListeningChange;\n        onBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange);\n        onBrowserSupportsContinuousListeningChange(browserSupportsSpeechRecognitionChange);\n      });\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect(disconnectType) {\n      if (this.recognition && this.listening) {\n        switch (disconnectType) {\n          case 'ABORT':\n            this.pauseAfterDisconnect = true;\n            this.abort();\n            break;\n\n          case 'RESET':\n            this.pauseAfterDisconnect = false;\n            this.abort();\n            break;\n\n          case 'STOP':\n          default:\n            this.pauseAfterDisconnect = true;\n            this.stop();\n        }\n      }\n    }\n  }, {\n    key: \"onRecognitionDisconnect\",\n    value: function onRecognitionDisconnect() {\n      this.onStopListening();\n      this.listening = false;\n\n      if (this.pauseAfterDisconnect) {\n        this.emitListeningChange(false);\n      } else if (this.recognition) {\n        if (this.recognition.continuous) {\n          this.startListening({\n            continuous: this.recognition.continuous\n          });\n        } else {\n          this.emitListeningChange(false);\n        }\n      }\n\n      this.pauseAfterDisconnect = false;\n    }\n  }, {\n    key: \"updateTranscript\",\n    value: function updateTranscript(_ref) {\n      var results = _ref.results,\n          resultIndex = _ref.resultIndex;\n      var currentIndex = resultIndex === undefined ? results.length - 1 : resultIndex;\n      this.interimTranscript = '';\n      this.finalTranscript = '';\n\n      for (var i = currentIndex; i < results.length; ++i) {\n        if (results[i].isFinal && (!(0, _isAndroid[\"default\"])() || results[i][0].confidence > 0)) {\n          this.updateFinalTranscript(results[i][0].transcript);\n        } else {\n          this.interimTranscript = (0, _utils.concatTranscripts)(this.interimTranscript, results[i][0].transcript);\n        }\n      }\n\n      var isDuplicateResult = false;\n\n      if (this.interimTranscript === '' && this.finalTranscript !== '') {\n        if (this.previousResultWasFinalOnly) {\n          isDuplicateResult = true;\n        }\n\n        this.previousResultWasFinalOnly = true;\n      } else {\n        this.previousResultWasFinalOnly = false;\n      }\n\n      if (!isDuplicateResult) {\n        this.emitTranscriptChange(this.interimTranscript, this.finalTranscript);\n      }\n    }\n  }, {\n    key: \"updateFinalTranscript\",\n    value: function updateFinalTranscript(newFinalTranscript) {\n      this.finalTranscript = (0, _utils.concatTranscripts)(this.finalTranscript, newFinalTranscript);\n    }\n  }, {\n    key: \"resetTranscript\",\n    value: function resetTranscript() {\n      this.disconnect('RESET');\n    }\n  }, {\n    key: \"startListening\",\n    value: function () {\n      var _startListening = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _ref2,\n            _ref2$continuous,\n            continuous,\n            language,\n            isContinuousChanged,\n            isLanguageChanged,\n            _args = arguments;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ref2 = _args.length > 0 && _args[0] !== undefined ? _args[0] : {}, _ref2$continuous = _ref2.continuous, continuous = _ref2$continuous === void 0 ? false : _ref2$continuous, language = _ref2.language;\n\n                if (this.recognition) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                isContinuousChanged = continuous !== this.recognition.continuous;\n                isLanguageChanged = language && language !== this.recognition.lang;\n\n                if (!(isContinuousChanged || isLanguageChanged)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                if (!this.listening) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 9;\n                return this.stopListening();\n\n              case 9:\n                this.recognition.continuous = isContinuousChanged ? continuous : this.recognition.continuous;\n                this.recognition.lang = isLanguageChanged ? language : this.recognition.lang;\n\n              case 11:\n                if (!this.listening) {\n                  if (!this.recognition.continuous) {\n                    this.resetTranscript();\n                    this.emitClearTranscript();\n                  }\n\n                  try {\n                    this.start();\n                  } catch (DOMException) {// Tried to start recognition after it has already started - safe to swallow this error\n                  }\n\n                  this.emitListeningChange(true);\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function startListening() {\n        return _startListening.apply(this, arguments);\n      }\n\n      return startListening;\n    }()\n  }, {\n    key: \"abortListening\",\n    value: function () {\n      var _abortListening = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this5 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.disconnect('ABORT');\n                this.emitListeningChange(false);\n                _context2.next = 4;\n                return new Promise(function (resolve) {\n                  _this5.onStopListening = resolve;\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function abortListening() {\n        return _abortListening.apply(this, arguments);\n      }\n\n      return abortListening;\n    }()\n  }, {\n    key: \"stopListening\",\n    value: function () {\n      var _stopListening = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this6 = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.disconnect('STOP');\n                this.emitListeningChange(false);\n                _context3.next = 4;\n                return new Promise(function (resolve) {\n                  _this6.onStopListening = resolve;\n                });\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function stopListening() {\n        return _stopListening.apply(this, arguments);\n      }\n\n      return stopListening;\n    }()\n  }, {\n    key: \"getRecognition\",\n    value: function getRecognition() {\n      return this.recognition;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.recognition && !this.listening) {\n        this.recognition.start();\n        this.listening = true;\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.recognition && this.listening) {\n        this.recognition.stop();\n        this.listening = false;\n      }\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      if (this.recognition && this.listening) {\n        this.recognition.abort();\n        this.listening = false;\n      }\n    }\n  }]);\n\n  return RecognitionManager;\n}();\n\nexports[\"default\"] = RecognitionManager;"]},"metadata":{},"sourceType":"script"}